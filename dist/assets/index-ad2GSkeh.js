import{r as e}from"./phaser-UvlxNa5i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var t=e();class s extends t.Scene{constructor(){super("Boot")}preload(){this.load.image("background","assets/bg.png")}create(){this.scene.start("Preloader")}}class i extends t.Scene{constructor(){super("Game")}create(){this.textures.get("Bricks Background").setFilter(Phaser.Textures.FilterMode.NEAREST),this.add.image(0,0,"Bricks Background").setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height);const e={key:"Bricks Main Character",frames:this.anims.generateFrameNumbers("Bricks Main Character",{start:0,end:3}),frameRate:10,repeat:-1};this.textures.get("Bricks Main Character").setFilter(Phaser.Textures.FilterMode.NEAREST),this.anims.create(e);const t=this.add.sprite(100,500,"Bricks Main Character");t.setScale(25),t.setAntialias&&t.setAntialias(!1);const s=1.1*t.displayWidth,i=Math.abs(-18)/1.2*2*4,a=Math.min(1.5*t.displayWidth,.75*i),r=.7*t.displayHeight,n=Math.ceil(this.scale.width/(s+a))+2;this.platforms=this.add.group();let h=0,o=600,c=[];for(let d=0;d<n;d++){let e=300,i=this.scale.height-32-10;const a=Math.abs(135);let n=Phaser.Math.Between(-r,r);n<0&&Math.abs(n)>a&&(n=-a);let l=Phaser.Math.Clamp(o+n,e,i);const d=Phaser.Math.FloatBetween(1,1.5),p=t.displayWidth*d;c.push(p);const g=this.add.image(h,l,"Bricks Platform");g.setOrigin(0,0),g.setDisplaySize(s,32),this.textures.get("Bricks Platform").setFilter(Phaser.Textures.FilterMode.NEAREST),this.platforms.add(g),h+=s+p,o=l}const l=this.platforms.getChildren()[0];t.x=l.x+s/2,t.y=l.y-t.displayHeight/2,this.groundY=t.y,this.isJumping=!1,this.jumpVelocity=-18,this.gravity=1.2,this.velocityY=0,this.input.keyboard.on("keydown",(e=>{this.isJumping||"Space"!==e.code&&"ArrowUp"!==e.code||(this.isJumping=!0,this.velocityY=this.jumpVelocity)})),this.platformSpeed=2,this.platformGaps=c,this.events.on("update",(()=>{this.platforms.getChildren().forEach((e=>{e.x-=this.platformSpeed})),this.platforms.getChildren().forEach(((e,i)=>{if(e.x+e.displayWidth<0){let a=this.platforms.getChildren().reduce(((e,t)=>t.x>e.x?t:e),e),n=300,h=this.scale.height-32-10,o=Phaser.Math.Between(-r,r);const c=Math.abs(135);o<0&&Math.abs(o)>c&&(o=-c);let l=Phaser.Math.Clamp(a.y+o,n,h);const d=Phaser.Math.FloatBetween(1,1.5),p=t.displayWidth*d;this.platformGaps[i]=p,e.x=a.x+s+p,e.y=l}}));let e=!1;if(this.platforms.getChildren().forEach((s=>{const i=t.y+t.displayHeight/2-(this.velocityY||0),a=t.y+t.displayHeight/2,r=t.x-t.displayWidth/2,n=t.x+t.displayWidth/2,h=s.x,o=s.x+s.displayWidth,c=n>h&&r<o,l=i<=s.y,d=a>=s.y&&i<=s.y+32,p=this.velocityY>=0;l&&d&&c&&p&&(t.y=s.y-t.displayHeight/2,this.groundY=t.y,this.isJumping=!1,this.velocityY=0,e=!0)})),this.isJumping&&(t.y+=this.velocityY,this.velocityY+=1.2),e||this.isJumping||(t.y+=8.5),this.stopwatchActive&&(this.elapsedTime+=this.game.loop.delta/1e3,this.stopwatchText.setText(this.elapsedTime.toFixed(2))),!e&&t.y-t.displayHeight/2>this.scale.height){this.stopwatchActive=!1;const e=this.platforms.getChildren()[0];t.x=e.x+s/2,t.y=e.y-t.displayHeight/2,this.groundY=t.y,this.isJumping=!1,this.velocityY=0,this.time.delayedCall(1e3,(()=>{this.elapsedTime=0,this.stopwatchActive=!0}))}t.anims.play("Bricks Main Character",!0)}))}update(){this.events.emit("update")}}class a extends t.Scene{constructor(){super("GameOver")}create(){this.cameras.main.setBackgroundColor(16711680),this.add.image(512,384,"background").setAlpha(.5),this.add.text(512,384,"Game Over",{fontFamily:"Arial Black",fontSize:64,color:"#ffffff",stroke:"#000000",strokeThickness:8,align:"center"}).setOrigin(.5),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))}}class r extends t.Scene{constructor(){super("MainMenu")}create(){const{width:e,height:t}=this.sys.game.config;this.add.image(e/2,t/2,"main-menu").setDisplaySize(e,t),this.input.once("pointerdown",(()=>{this.scene.start("Game")}))}}class n extends t.Scene{constructor(){super("Preloader")}init(){this.add.image(512,384,"background"),this.add.rectangle(512,384,468,32).setStrokeStyle(1,16777215);const e=this.add.rectangle(282,384,4,28,16777215);this.load.on("progress",(t=>{e.width=4+460*t}))}preload(){this.load.setPath("assets"),this.load.image("logo","logo.png"),this.load.image("main-menu","Bricks Main Menu.png"),this.load.spritesheet("Bricks Main Character","Bricks Main Character.png",{frameWidth:3,frameHeight:3}),this.load.image("Bricks Main Character","Bricks Main Character.png"),this.load.image("Bricks Background","Bricks Background.png"),this.load.image("Bricks Platform","Bricks Platform.png"),this.load.image("Bricks Game Over","Bricks Game Over.png")}create(){this.scene.start("MainMenu")}}const h={type:t.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#028af8",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},scene:[s,n,r,i,a]};document.addEventListener("DOMContentLoaded",(()=>{new t.Game({...h,parent:"game-container"})}));
